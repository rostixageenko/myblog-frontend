<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>–í—Å–µ –±–ª–æ–≥–∏ ‚Äî MyBlog</title>
        <link rel="stylesheet" href="../css/user_main_page.css" />
        <link rel="icon" href="../logo/head-logo.svg" type="image/png" />
    </head>

    <body>
        <header>
            <div class="logo">
                <img
                    src="../logo/white-logo.png"
                    alt="MyBlog Logo"
                    class="logo-img"
                />
            </div>

            <div class="naming">
                <h2>
                    –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å <span id="firstName"></span>
                    <span id="lastName"></span>
                </h2>
            </div>
            <div>
                <button id="admin-btn" class="admin-btn">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button id="logout-btn" class="logout-btn">–í—ã–π—Ç–∏</button>
            </div>

            <!-- Burger (mobile) -->
            <div class="burger" id="burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </header>

        <!-- MOBILE MENU -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="mobile-user">
                <div class="mobile-name">
                    <span id="firstNameMobile"></span>
                    <span id="lastNameMobile"></span>
                </div>
            </div>

            <button class="admin-btn mobile-admin">–ü—Ä–æ—Ñ–∏–ª—å</button>
            <button class="logout-btn mobile-logout">–í—ã–π—Ç–∏</button>
        </div>

        <div id="admin-modal" class="modal-overlay">
            <div class="modal">
                <span class="close-btn" id="close-modal">&times;</span>
                <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
                <div class="field">
                    <label>–ò–º—è</label>
                    <input
                        type="text"
                        id="admin-first-name"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
                    />
                </div>
                <div class="field">
                    <label>–§–∞–º–∏–ª–∏—è</label>
                    <input
                        type="text"
                        id="admin-last-name"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
                    />
                </div>
                <div class="field">
                    <label>Email</label>
                    <input
                        type="text"
                        id="admin-email"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ email"
                    />
                    <span class="comment"
                        >–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å email (–±–µ–∑ –ø–æ—á—Ç—ã –Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ
                        –∏–∑–º–µ–∏—Ç—å –ø–∞—Ä–æ–ª—å)
                    </span>
                </div>

                <div class="field">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input
                        type="tel"
                        id="admin-phone"
                        placeholder="+375********* –∏–ª–∏ +7**********"
                    />
                </div>

                <button id="save-admin" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button
                    id="reset-password-admin"
                    class="save-btn"
                    style="margin-left: 10px"
                >
                    –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
                </button>

                <button
                    id="delete-account"
                    class="save-btn danger-btn"
                    type="button"
                >
                    –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                </button>
            </div>
        </div>

        <main>
            <!-- üî• –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: —Å–ø–∏—Å–æ–∫ –±–ª–æ–≥–æ–≤ –∞–≤—Ç–æ—Ä–æ–≤ -->
            <div class="blogs-list">
                <h2>–ë–ª–æ–≥–∏ –∞–≤—Ç–æ—Ä–æ–≤</h2>
                <div id="authorsContainer"></div>
            </div>

            <!-- üî• –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ø–æ—Å—Ç—ã –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ -->
            <div class="blog-container">
                <div id="postsContainer"></div>
            </div>
        </main>

        <script src="../js/user_script.js"></script>
        <script src="../js/profile_modal.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const maxLength = 50;

                const emailField = document.getElementById('admin-email');
                const phoneField = document.getElementById('admin-phone');
                const firstNameField =
                    document.getElementById('admin-first-name');
                const lastNameField =
                    document.getElementById('admin-last-name');

                const inputs = document.querySelectorAll('input');

                inputs.forEach((field) => {
                    field.addEventListener('input', () => {
                        if (
                            field === firstNameField ||
                            field === lastNameField
                        ) {
                            if (/[^A-Za-z–ê-–Ø–∞-—è–Å—ë]/g.test(field.value)) {
                                alert('–î–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ –±—É–∫–≤–µ–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã!');
                                field.value = field.value.replace(
                                    /[^A-Za-z–ê-–Ø–∞-—è–Å—ë]/g,
                                    ''
                                );
                                return;
                            }
                        }

                        if (field === emailField) {
                            if (/[–ê-–Ø–∞-—è–Å—ë]/g.test(field.value)) {
                                alert('–†—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∑–∞–ø—Ä–µ—â–µ–Ω—ã!');
                                field.value = field.value.replace(
                                    /[–ê-–Ø–∞-—è–Å—ë]/g,
                                    ''
                                );
                                return;
                            }

                            if (/[^A-Za-z0-9@.]/g.test(field.value)) {
                                alert(
                                    '–ó–∞–ø—Ä–µ—â–µ–Ω—ã —Å–∏–º–≤–æ–ª—ã, –∫—Ä–æ–º–µ –ª–∞—Ç–∏–Ω–∏—Ü—ã, —Ü–∏—Ñ—Ä, —Ç–æ—á–∫–∏ –∏ @!'
                                );
                                field.value = field.value.replace(
                                    /[^A-Za-z0-9@.]/g,
                                    ''
                                );
                                return;
                            }
                        }

                        if (field === phoneField) {
                            if (/[^0-9+]/g.test(field.value)) {
                                alert('–†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã –∏ —Å–∏–º–≤–æ–ª "+"!');
                                field.value = field.value.replace(
                                    /[^0-9+]/g,
                                    ''
                                );
                                return;
                            }

                            if (
                                (field.value.match(/\+/g) || []).length > 1 ||
                                field.value.indexOf('+') > 0
                            ) {
                                alert(
                                    '–°–∏–º–≤–æ–ª "+" –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ –Ω–æ–º–µ—Ä–∞!'
                                );
                                field.value = field.value.replace(/\+/g, '');
                                return;
                            }
                        }

                        if (field.value.length > maxLength) {
                            alert(
                                '–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ ‚Äî 50'
                            );
                            field.value = field.value.slice(0, maxLength);
                        }
                    });
                });
            });
        </script>
    </body>
</html>
